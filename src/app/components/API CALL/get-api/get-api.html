<div class="row">
  <div class="col-3">
    <button (click)="getUsers()" class="btn btn-success">Load Users</button>
  </div>
</div>

<div class="row">
  <div class="col-6">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>No.</th>
          <th>Name</th>
          <th>Username</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Website</th>
        </tr>
      </thead>
      <tbody>
        @for (item of userList; track $index) {
        <tr>
          <td>{{ $index + 1 }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.username }}</td>
          <td>{{ item.email }}</td>
          <td>{{ item.phone }}</td>
          <td>{{ item.website }}</td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<div class="row mt-4">
  <div class="col-3">
    <button (click)="getProducts()" class="btn btn-primary">Load Products</button>
  </div>
</div>

<div class="row">
  <div class="col-8">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>No.</th>
          <th>Title</th>
          <th>Description</th>
          <th>Price</th>
          <th>Category</th>
        </tr>
      </thead>
      <tbody>
        @for (item of productList; track $index) {
        <tr>
          <td>{{ $index + 1 }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.description }}</td>
          <td>{{ item.price }}</td>
          <td>{{ item.category }}</td>
        </tr>
        }
      </tbody>
    </table>
  </div>
  <div class="col-4">
    <select>
      @for (item of productList; track $index) {
      <option [value]="item.product_id">{{ item.name }}</option>
      }
    </select>
  </div>
</div>
<hr />
<div class="container-fluid">
  @if (rolesList.length === 0) {
  <div class="text-center py-5">
    <p class="text-muted">No roles available. Create one to get started.</p>
  </div>
  } @if (rolesList.length > 0) {
  <div class="row g-4">
    @for (role of rolesList; track role.id) {
    <div class="col-12">
      <div class="card shadow-sm rounded-4">
        <div class="card-body d-flex flex-column">
          <h5 class="fw-bold text-dark mb-3">
            {{ role.name }}
          </h5>

          <div class="mb-3">
            @for (entry of getPermissionEntries(role.permission); track entry[0]) {
            <div class="mb-2">
              <small class="fw-semibold text-secondary text-uppercase">
                {{ entry[0].replace('_', ' ') }}
              </small>

              <div class="d-flex flex-wrap gap-2 mt-1">
                @for (action of entry[1]; track action) {
                <span class="badge rounded-pill bg-primary-subtle text-primary px-3 py-2">
                  {{ action }}
                </span>
                }
              </div>
            </div>
            }
          </div>

          <div class="mt-auto d-flex justify-content-end gap-2">
            <button class="btn btn-outline-secondary btn-sm">Edit</button>
            <button class="btn btn-outline-success btn-sm">Assign</button>
            <button class="btn btn-outline-danger btn-sm">Delete</button>
          </div>
        </div>
      </div>
    </div>
    }
  </div>
  }
</div>
